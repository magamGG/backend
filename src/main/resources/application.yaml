logging:
  level:
    org.hibernate.SQL: DEBUG
    org.hibernate.orm.jdbc.bind: TRACE
    com.kh.magamGG.global.security.JwtAuthenticationFilter: INFO
    com.kh.magamGG.domain.notification: INFO

spring:
  application:
    name: magamgg
  profiles:
    include: local   # application-local.yaml 로드 (파일 없으면 무시)

  datasource:
    url: jdbc:mysql://localhost:3306/magamgg?serverTimezone=Asia/Seoul&characterEncoding=UTF-8
    username: ${SPRING_DATASOURCE_USERNAME:}
    password: ${SPRING_DATASOURCE_PASSWORD:}
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 30
      minimum-idle: 5
      connection-timeout: 60000
      idle-timeout: 300000
      max-lifetime: 1800000

  servlet:
    multipart:
      max-file-size: 20MB
      max-request-size: 20MB

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        format_sql: true

  # 캐싱 설정 (최적화)
  cache:
    type: simple
    cache-names: leaveBalance, agencyInfo

  # 메일 비밀번호 등 시크릿은 application-local.yaml 에서 덮어쓰기 (해당 파일은 .gitignore)
  mail:
    host: smtp.gmail.com
    port: 587
    username: ${SPRING_MAIL_USERNAME:magamgglocalservice@gmail.com}
    password: ${SPRING_MAIL_PASSWORD:gniy mzoy ewjw lqna}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
          connectiontimeout: 5000
          timeout: 5000
          writetimeout: 5000

<<<<<<< HEAD
  # OpenAI API Key: application-local.yaml 또는 OPENAI_API_KEY 환경변수로 설정
  ai:
    openai:
      api-key: ${OPENAI_API_KEY:sk-placeholder-set-in-application-local-yaml}
      chat:
        options:
          model: gpt-4o-mini
          temperature: 0.7

# JWT 시크릿: application-local.yaml 또는 JWT_ACCESS_SECRET, JWT_REFRESH_SECRET 환경변수로 설정
jwt:
  access-secret: ${JWT_ACCESS_SECRET:dev-access-secret-key-12345678901234567890123456789012}
  refresh-secret: ${JWT_REFRESH_SECRET:dev-refresh-secret-key-98765432109876543210987654321098}
  access-expiration: 900000      # 15분 (밀리초)
  refresh-expiration: 604800000  # 7일 (밀리초)

server:
  port: 8888

  servlet:
    encoding:
      charset: UTF-8
      enabled: true
      force: true

file:
  upload-dir: uploads

<<<<<<< HEAD
# 공공데이터 API: application-local.yaml 또는 PUBLIC_DATA_HOLIDAY_API_KEY 환경변수로 설정
public-data:
  holiday:
    api-key: ${PUBLIC_DATA_HOLIDAY_API_KEY:}
    base-url: http://apis.data.go.kr/B090041/openapi/service/SpcdeInfoService
    data-dir: holidays  # uploads/holidays 디렉토리에 저장

# Notion: application-local.yaml 또는 NOTION_CLIENT_ID, NOTION_CLIENT_SECRET 환경변수로 설정
notion:
  client-id: ${NOTION_CLIENT_ID:}
  client-secret: ${NOTION_CLIENT_SECRET:}
  redirect-uri: ${NOTION_REDIRECT_URI:http://localhost:5173/notion/callback}
  api-version: "2022-06-28"

# Google OAuth: GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET 환경변수로 설정 (시크릿 노출 방지)
google:
  oauth:
    client-id: ${GOOGLE_CLIENT_ID:}
    client-secret: ${GOOGLE_CLIENT_SECRET:}
    redirect-uri: ${GOOGLE_REDIRECT_URI:http://localhost:8888/api/auth/google/callback}
    scope: ${GOOGLE_SCOPE:openid profile email}

# Naver OAuth: NAVER_CLIENT_ID, NAVER_CLIENT_SECRET 환경변수로 설정 (시크릿 노출 방지)
naver:
  oauth:
    client-id: ${NAVER_CLIENT_ID:}
    client-secret: ${NAVER_CLIENT_SECRET:}
    redirect-uri: ${NAVER_REDIRECT_URI:http://localhost:8888/api/auth/naver/callback}
    # Naver API 엔드포인트
    authorization-url: https://nid.naver.com/oauth2.0/authorize
    token-url: https://nid.naver.com/oauth2.0/token
    user-info-url: https://openapi.naver.com/v1/nid/me

# Kakao OAuth: KAKAO_REST_API_KEY 환경변수로 설정 (시크릿 노출 방지)
# Kakao는 client-secret이 없고 REST API Key만 사용
kakao:
  oauth:
    rest-api-key: ${KAKAO_REST_API_KEY:}
    redirect-uri: ${KAKAO_REDIRECT_URI:http://localhost:8888/api/auth/kakao/callback}
    # Kakao API 엔드포인트
    authorization-url: https://kauth.kakao.com/oauth/authorize
    token-url: https://kauth.kakao.com/oauth/token
    user-info-url: https://kapi.kakao.com/v2/user/me

# 공공데이터 API 설정
public-data:
  holiday:
    api-key: ${PUBLIC_DATA_HOLIDAY_API_KEY:pFg7%2B9ZuBDORVUL2Qy9DA9FffkmHzyemVbSPIN0trHBQjjgZp%2FfruTLqscT7swt3tdGf1Wi0tjZ6Lehba3YeHg%3D%3D}
    base-url: http://apis.data.go.kr/B090041/openapi/service/SpcdeInfoService
    data-dir: holidays  # uploads/holidays 디렉토리에 저장

# Notion OAuth: NOTION_CLIENT_ID, NOTION_CLIENT_SECRET 환경변수로 설정 (시크릿 노출 방지)
notion:
  client-id: ${NOTION_CLIENT_ID:your-notion-client-id}
  client-secret: ${NOTION_CLIENT_SECRET:your-notion-client-secret}
  redirect-uri: ${NOTION_REDIRECT_URI:http://localhost:5173/notion/callback}
  api-version: "2022-06-28"
